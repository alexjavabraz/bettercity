
function criaString(e,o){return'<div id="content"><div id="siteNotice"></div><h1 id="firstHeading" class="firstHeading">'+e+'</h1><div id="bodyContent"><p><b>'+o+'</b>, also referred to as <b>Ayers Rock</b>, is a large Northern Territory, central Australia. It lies 335&#160;km (208&#160;mi) south west of the nearest large town, Alice Springs; 450&#160;km (280&#160;mi) by road. Kata Tjuta and Uluru are the two major Heritage Site.</p><p>Attribution: Uluru, <a href="https://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194">https://en.wikipedia.org/w/index.php?title=Uluru</a></p></div></div>'}function initialize(){function e(e,o){var a=new google.maps.Marker({position:e,label:m[u++%m.length],map:o});o.setCenter(e),a.setMap(null),a.setMap(o);var t="";t=""==userLogged?addPointNaoLogado():addPoint(a.position.lat(),a.position.lng()),o.getZoom()<18?(o.setZoom(18),a.setMap(null)):(marcacaoDoUsuarioNaoLogado=new google.maps.InfoWindow({content:t}),a.addListener("click",function(){info.open(o,a)}),info.open(o,a))}FB.getLoginStatus(),map=new google.maps.Map(document.getElementById("map"),{zoom:14,center:new google.maps.LatLng(-23.6057502,-46.9178099),mapTypeId:google.maps.MapTypeId.ROADMAP});var o=document.createElement("script");o.src="http://"+document.location.host+"/oss/rest/map",document.getElementsByTagName("head")[0].appendChild(o);var a=document.getElementById("legend");for(var t in icons){var n=icons[t],i=n.name,r=n.icon,s=document.createElement("div");s.innerHTML='<img src="'+r+'"> '+i,a.appendChild(s)}map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(a),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var o=e.coords.latitude,a=e.coords.longitude,t=e.coords.accuracy;e.timestamp;5e4>t?(console.log(o),console.log(a),console.log(t),localizacaoUsuario=new google.maps.Marker({position:{lat:o,lng:a},map:map,icon:pictureUser,title:"Você está aqui",label:"Você está aqui",zIndex:10,optimized:!0,draggable:!1})):console.log("Accuracy exced limit "+t)},function(e){alert(e)},{timeout:1e4},{maximumAge:2e4});var l=document.getElementById("pac-input"),c=new google.maps.places.SearchBox(l);map.controls[google.maps.ControlPosition.TOP_LEFT].push(l),map.addListener("bounds_changed",function(){c.setBounds(map.getBounds())});var d=[];c.addListener("places_changed",function(){var e=c.getPlaces();if(0!=e.length){d.forEach(function(e){e.setMap(null)}),d=[];var o=new google.maps.LatLngBounds;e.forEach(function(e){var a={url:e.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};d.push(new google.maps.Marker({map:map,icon:a,title:e.name,position:e.geometry.location})),e.geometry.viewport?o.union(e.geometry.viewport):o.extend(e.geometry.location)}),map.fitBounds(o)}});var m="ABCDEFGHIJKLMNOPQRSTUVWXYZ",u=0;google.maps.event.addListener(map,"click",function(o){e(o.latLng,map)})}function addPointNaoLogado(){return document.getElementById("facaLogin").innerHTML}function addPoint(e,o){var a=Math.random();return codeLatLng(e,o,"formulario_endereco"+a),"	<div id="+a+' class="form">	<nav class="" id='+a+'>	<a href="'+a+'" onClick="document.getElementById('+a+').className=\'home\'"     class="home"     ng-click="ativo=\'home\'">Problema</a>	<a href="#'+a+'" onClick="document.getElementById('+a+').className=\'projects\'" class="projects" ng-click="ativo=\'projects\'">Informação</a>	<a href="#'+a+'" onClick="document.getElementById('+a+').className=\'services\'" class="services" ng-click="ativo=\'services\'">Sugestão</a>	<a href="#'+a+'" onClick="document.getElementById('+a+').className=\'contact\'"  class="contact"  ng-click="ativo=\'contact\'">Outro</a>	</nav>	<div class="formulario"><input type="hidden" id="formulario_lat'+a+'" value="'+e+'"><input type="hidden" id="formulario_long'+a+'" value="'+o+'">	<div><input type="text" class="formulario_input" id="formulario_titulo'+a+'" required placeholder="Qual o problema?" /></div>	<div><textarea id="formulario_descricao'+a+'" class="formulario_textarea" maxlength="500" cols="50" rows="4" placeholder="Descreva o problema, com o máximo de detalhes"></textarea></div>	<div><input type="text" id="formulario_endereco'+a+'" class="formulario_input" name="endereco" /></div>	<div class="formulario_div_imagem"><img src="assets/images/icos/photo.png" class="formulario_imagem" id="formulario_imagem_'+a+'" onClick="insertDemanda('+a+')" class="formulario_button"/></div>	<div class="formulario_div_btn"><button class="btn" onClick="insertDemanda('+a+')" class="formulario_button"/>Melhorar a cidade</div>	</div>'}function codeLatLng(e,o,a){var t=new google.maps.Geocoder,n=new google.maps.LatLng(e,o);t.geocode({latLng:n},function(e,o){o===google.maps.GeocoderStatus.OK?e[1]?(document.getElementById(a).value=e[0].formatted_address,console.log(e[0].formatted_address)):console.log("No results found"):console.log("Geocoder failed due to: "+o)})}function insertDemanda(e){var o=document.getElementById("formulario_titulo"+e).value,a=document.getElementById("formulario_descricao"+e).value,t=document.getElementById("formulario_endereco"+e).value,n=document.getElementById("formulario_lat"+e).value,i=document.getElementById("formulario_long"+e).value,r="http://"+document.location.host+"/oss/rest/demanda/ins";websocket.send("<br/><br/>Criado o ponto no mapa: <b>Titulo</b> "+o+" <b>Descricao:</b> "+a+" <b>Endereço:</b> "+t+" <b>Latitude:</b> "+n+" <b>Longitude:</b> "+i),$.post(r,{titulo:o,descricao:a,endereco:t,latitude:n,longitude:i},function(o){"ok"==o&&(document.getElementById(e).innerHTML=document.getElementById("parabens").innerHTML)},"text")}var map,pictureUser="",userLogged="",marcacaoDoUsuarioNaoLogado="",websocket=new WebSocket("ws://"+document.location.host+"/oss/MyWebSocketServlet?username=mapa"),address="",iconBase="http://"+document.location.host+"/oss/assets/images/icos/",localizacaoUsuario="",icons={problema:{name:"Problema",icon:iconBase+"problem.png"},melhorado:{name:"Melhorado",icon:iconBase+"completed.png"},working:{name:"Atuando",icon:iconBase+"under_construction2.png"},info:{name:"Informa&#231;&#227;o",icon:iconBase+"analyzing.png"}};window.eqfeed_callback=function(e){for(var o=0;o<e.features.length;o++){var a=e.features[o].geometry.coordinates,t=new google.maps.LatLng(a[0],a[1]),n=(e.features[o].properties.title,e.features[o].properties.place,e.features[o].properties.mag);new google.maps.Marker({position:t,map:map,title:e.features[o].properties.title,label:e.features[o].properties.place,icon:icons[e.features[o].properties.type].icon,zIndex:n,optimized:!0,draggable:!1}).addListener("click",function(){new google.maps.InfoWindow({content:criaString(this.title,this.label)}).open(map,this)})}};var myJSONData='{"data":{"mode" : "subscribe","technologyareas":[1],"assettypes":["podcast","documents"]}}',url="res/demanda/ins";$(document).ready(function(){var e=1e3;$("#pw-mask").click(function(){$("#pw-mask").hide(e),$("#signwall").hide(e)}),$("#login").click(function(){console.log($("#login").html()),"Acessar"==$("#login").html()&&($("#pw-mask").show(e),$("#signwall").show(e))})});